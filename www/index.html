<!DOCTYPE html>
<html ng-app="starter">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link rel="manifest" href="manifest.json">

    <!-- un-comment this code to enable service worker
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
          .then(() => console.log('service worker installed'))
          .catch(err => console.log('Error', err));
      }
    </script>-->

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <style>
      .book_store_logo { max-width: 45px; vertical-align:middle; }
      .book_store_price { padding: 0px; margin: 0px; }
      .book_store_price p { font-size: 12px; font-weight: bold; }
    </style>
    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <script src="lib/jquery-3.1.1.min.js"></script>
    <script src="lib/libs.js"></script>
    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- your app's js -->
    <!--<script src="js/app.js"></script>-->
  </head>
  <body ng-controller="starterCtrl as sc" ng-cloak="">

    <ion-pane>
      <form name="findBook" onsubmit="return false;">
        <ion-header-bar class="bar-stable item-input-inset">
          <label class="item-input-wrapper">
            <i class="icon ion-ios-search placeholder-icon"></i>
            <input type="search" placeholder="Book Title or ISBN" ng-model="sc.searchText">
          </label>
          <a class="button button-icon icon ion-navicon" ng-click=""></a>
        </ion-header-bar>
      </form>
      <ion-content class="has-footer">
        <div class="card" ng-repeat="sell in sc.sellBookList" ng-cloak="">
          <div class="item item-thumbnail-left" style="padding-top: 8px; padding-left: 74px; padding-right: 0px; padding-bottom: 8px;">
            <img src="{{sell.image}}" alt="{{sell.title}}" style="max-width: 54px;">
            <h2 ng-bind="sell.title" style="margin-right: 8px;"></h2>
            <p ng-bind="'ISBN:' + sell.isbn"></p>
            <p ng-click="sc.removeBook($index)" style="position: absolute; top:5px; right:5px;">
              <i class="fa fa-remove"></i>
            </p>
            <div class="button-bar button-outline bar-energized" style="padding-right: 8px;">
              <a href="#" data="1" class="button button-small" ng-class="{'button-assertive':sell.status=='bestPrice'}" ng-click="sc.changeStatus($event, sell, 'bestPrice')">
                <i class="fa fa-angle-double-up"></i> 최상
              </a>
              <a href="#" data="2" class="button button-small" ng-class="{'button-assertive':sell.status=='normalPrice'}" ng-click="sc.changeStatus($event, sell, 'normalPrice')">
                <i class="fa fa-angle-up"></i> 중상
              </a>
              <a href="#" data="3" class="button button-small" ng-class="{'button-assertive':sell.status=='lowPrice'}" ng-click="sc.changeStatus($event, sell, 'lowPrice')">
                <i class="fa fa-angle-down"></i> 상
              </a>
            </div>
            <p></p>
            <div class="row">
              <div class="col col-25 text-center" style="padding: 0px;"><img class="book_store_logo" src="./img/aladin_logo.png" alt="알라딘"></div>
              <div class="col col-25 text-center" style="padding: 0px;"><img class="book_store_logo" src="./img/yes24_logo.png" alt="Yes24"></div>
              <div class="col col-25 text-center" style="padding: 0px;"><img class="book_store_logo" src="./img/bandi_logo.png" alt="반디앤루니스"></div>
              <div class="col col-25 text-center" style="padding: 0px;"><img class="book_store_logo" src="./img/interpark_logo.png" alt="인터파크"></div>
            </div>
            <div class="row book_store_price">
              <div ng-repeat="books in bookStoreData" class="col col-25 text-center book_store_price">
                <p ng-if="sell[books.eng]==null" style="color: #69717d;">검색안됨</p>
                <p ng-if="sell[books.eng].available==false" style="color: #ef473a;">매입불가</p>
                <p ng-if="sell[books.eng].available==true">{{sell[books.eng].selectedPrice|currency :'':0}}<span style="color: #009689;">원</span></p>
              </div>
            </div>
          </div>
        </div>
        <!--
        <div class="list">
          <div>
            <div class="item item-divider">교보문고</div>
            <a href="#" class="item item-thumbnail-left" style="padding-top: 8px; padding-left: 74px; padding-right: 0px; padding-bottom: 8px;">
              <img src="http://image.kyobobook.co.kr/images/book/large/000/l9788995869000.jpg" style="width: 57px;">
              <h2>일본의 21세기 비전</h2>
              <p>한국일본학회 40주년 특별위원회 | 보고사</p>
              <p>2013년 01월 | DC Virus</p>
              <p>12,000원 → <strong style="color: #ef473a;">2,700원</strong></p>
            </a>
            <div class="item light-bg text-center" style="padding: 8px;">추가 검색</div>
          </div>
          <div>
            <div class="item item-divider">북코아</div>
            <a href="#" class="item item-thumbnail-left" style="padding-top: 8px; padding-left: 74px; padding-right: 0px; padding-bottom: 8px;">
              <img src="http://image.kyobobook.co.kr/images/book/large/000/l9788995869000.jpg" style="width: 57px;">
              <h2>일본의 21세기 비전</h2>
              <p>한국일본학회 40주년 특별위원회 | 보고사</p>
              <p>2013년 01월 | DC Virus</p>
              <p>12,000원 → <strong style="color: #ef473a;">2,700원</strong></p>
            </a>
          </div>
        </div>
        -->
      </ion-content>
      <ion-footer-bar class="bar-stable" ng-if="sc.sellBookList.length > 0">
        <div class="row book_store_price">
          <div ng-repeat="total in sc.showCalculation()" class="col col-25 text-center book_store_price">
            <p ng-class="{assertive:totalPriceMax==total.totalPrice}">{{total.kor}}<br>{{total.totalPrice|currency :'':0}}<span style="color: #009689;">원</span></p>
          </div>
        </div>
        <div class="buttons">
          <button class="button icon-right ion-chevron-right button-dark" ng-click="sc.showHyperlink()"></button>
        </div>
      </ion-footer-bar>
    </ion-pane>

    <script id="findBookResult.html" type="text/ng-template">
      <ion-modal-view>
        <ion-header-bar class="bar-light">
          <button class="button button-light icon-left ion-chevron-left" ng-click="sc.closeResultModal()">Back</button>
          <h1 class="title">책 검색 결과</h1>
        </ion-header-bar>
        <ion-content id="findBookLayer" delegate-handle="findBookScroll">
          <div class="list">
            <a href="#" class="item item-thumbnail-left" ng-repeat="book in sc.findBookList.rss.channel.item" style="padding-left: 80px;" ng-click="sc.selectBook(book)">
              <img src="{{book.image}}" alt="{{book.title}}" style="max-width: 54px;">
              <h2 ng-bind="book.title"></h2>
              <p ng-bind="book.author"></p>
              <p ng-bind="book.publisher"></p>
              <p ng-bind="'ISBN:' + book.isbn13"></p>
            </a>
          </div>
        </ion-content>
      </ion-modal-view>
    </script>
    <script id="bookStoreHyperlink.html" type="text/ng-template">
      <div class="buttons">
        <button ng-repeat="bookStore in bookStoreData"
                ng-click="sc.moveToBookStore(bookStore)"
                class="button button-small button-light button-block">
          <img class="book_store_logo" src="./img/{{bookStore.eng}}_logo.png" alt="{{bookStore.kor}}"> {{bookStore.kor}}
          <i class="fa fa-check-circle" ng-if="totalPriceMax == bookStore.totalPrice"></i>
        </button>
      </div>
    </script>
    <script src="js/app.js"></script>
  </body>
</html>
